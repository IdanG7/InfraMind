# InfraMind Environment Configuration
# Copy this file to .env and update with your values

# =============================================================================
# API Configuration
# =============================================================================

# Security - CHANGE IN PRODUCTION!
API_KEY=change-me-in-production-use-strong-random-key
API_TITLE=InfraMind API
API_VERSION=0.1.0

# Logging
LOG_LEVEL=info  # debug, info, warning, error

# =============================================================================
# Service Ports (Customize if conflicts exist)
# =============================================================================

# API
API_PORT=8080
API_HOST=0.0.0.0

# PostgreSQL
POSTGRES_PORT=5432
POSTGRES_HOST=postgres

# Redis
REDIS_PORT=6379
REDIS_HOST=redis

# Prometheus
PROMETHEUS_PORT=9090

# Grafana
GRAFANA_PORT=3000

# MinIO
MINIO_PORT=9000
MINIO_CONSOLE_PORT=9001

# =============================================================================
# Database Configuration
# =============================================================================

POSTGRES_USER=inframind
POSTGRES_PASSWORD=change-me-in-production
POSTGRES_DB=inframind
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:5432/${POSTGRES_DB}

# =============================================================================
# Redis Configuration
# =============================================================================

REDIS_URL=redis://${REDIS_HOST}:6379/0
REDIS_PASSWORD=  # Optional: Set for production

# =============================================================================
# MinIO/S3 Configuration
# =============================================================================

MINIO_ENDPOINT=minio:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_SECURE=false
MINIO_BUCKET=im-logs

# For AWS S3:
# AWS_ACCESS_KEY_ID=your-key
# AWS_SECRET_ACCESS_KEY=your-secret
# AWS_REGION=us-east-1
# S3_BUCKET=inframind-logs

# =============================================================================
# ML Model Configuration
# =============================================================================

MODEL_PATH=./models
MODEL_VERSION=v1
FEATURE_CACHE_TTL=3600  # seconds (1 hour)

# Optimization Parameters
SAFE_MULTIPLIER=1.2      # Memory safety guard multiplier
EXPLORATION_RATE=0.15    # Exploration vs exploitation (0-1)

# =============================================================================
# Kubernetes Configuration (for production)
# =============================================================================

K8S_NAMESPACE=infra
K8S_IN_CLUSTER=false
K8S_API_SERVER=  # Optional: External K8s API

# =============================================================================
# Monitoring & Alerting
# =============================================================================

# Grafana
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=change-me-in-production

# Prometheus
PROMETHEUS_RETENTION=15d

# Alerts
SLACK_WEBHOOK_URL=  # Optional: For Slack notifications
PAGERDUTY_KEY=      # Optional: For PagerDuty integration

# =============================================================================
# Rate Limiting
# =============================================================================

RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=100
RATE_LIMIT_BURST=20

# =============================================================================
# Feature Flags
# =============================================================================

ENABLE_ML_TRAINING=true
ENABLE_AUTO_SCALING=false
ENABLE_COST_TRACKING=true
ENABLE_CACHE_OPTIMIZATION=true

# =============================================================================
# Production Settings
# =============================================================================

# Environment
ENVIRONMENT=development  # development, staging, production

# CORS
CORS_ORIGINS=*  # Comma-separated list, e.g., "https://app.example.com,https://dashboard.example.com"

# Workers
UVICORN_WORKERS=1  # Set to CPU count in production

# Timeouts
REQUEST_TIMEOUT=30  # seconds
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10
